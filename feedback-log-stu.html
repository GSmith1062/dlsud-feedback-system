<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css">
    <title>Student Feedback Log</title>
</head>
<body>
    <header class="header">
        <a href="#"><p>FEEDBACK LOG</p></a>
        <a href="./profile.html"><p>PROFILE</p></a>
        <a href="#"><p>LOG OUT</p></a>
    </header>

    <div class="feedback-log-container">
        <aside class="sidebar">
            <div class="sidebar-options">
                <div class="sidebar-option">
                    <button class="write-feedback-btn">
                        <span>Write Feedback</span>
                    </button>
                </div>
                <div class="sidebar-option"><p>All Feedback</p></div>
                <div class="sidebar-option"><p>Starred</p></div>
                <div class="sidebar-option"><p>Trash</p></div>
                <div class="sidebar-option"><p>Pending</p></div>
                <div class="sidebar-option"><p>Ongoing</p></div>
                <div class="sidebar-option"><p>Resolved</p></div>
            </div>
        </aside>

        <main class="feedback-log">
            <div id="feedback-table">
                <table>
                    <thead>
                        <tr>
                            <th class="feedback-starred"></th>
                            <th class="feedback-title">Feedback</th>
                            <th class="feedback-category">Category</th>
                            <th class="feedback-status">Status</th>
                            <th class="feedback-date">Date Submitted</th>
                        </tr>
                    </thead>
                    <tbody id="feedback-items">
                        <!-- feedback items will be added here -->
                    </tbody>
                </table>
            </div>
            <div id="email-log-view" style="display: none;">
                <!-- Email log view will be populated here -->
            </div>
        </main>
        
        <script>
            // Static example feedback data
            const feedbackData = [
                { text: "Make Monday to Friday holidays so we can enjoy life", category: "Suggestion", status: "Pending", date: "June 9, 2024" },
                { text: "Improve the Wi-Fi in the library for better student experience", category: "Concern", status: "Ongoing", date: "October 1, 2024" },
                { text: "Reduce the tuition fees as it is too expensive", category: "Suggestion", status: "Resolved", date: "November 1, 2024" },
                { text: "Introduce more courses on Artificial Intelligence", category: "Suggestion", status: "Pending", date: "September 20, 2024" }
            ];
            
            // status color
            function renderFeedback(feedback, index) {
                const feedbackRow = document.createElement('tr'); // creates a table row
        
                // color classes based on status
                const statusClasses = {
                    "Pending": "pending",
                    "Ongoing": "ongoing",
                    "Resolved": "resolved"
                };
        
                const statusClass = statusClasses[feedback.status] || "pending";  // Default to pending
        
                feedbackRow.innerHTML = `
                    <td class="feedback-starred">
                        <i class="fas fa-star ${feedback.starred ? 'starred' : 'unstarred'}" onclick="toggleStar(${index}, event)"></i>
                    </td>
                    <td class="feedback-text">${feedback.text.length > 50 ? feedback.text.slice(0, 50) + "..." : feedback.text}</td>
                    <td class="feedback-category">${feedback.category}</td>
                    <td class="feedback-status"><div class="status-background ${statusClass}">${feedback.status}</div></td>
                    <td class="feedback-date">${feedback.date}</td>
                `;

                document.getElementById('feedback-items').appendChild(feedbackRow);
            }

            function toggleStar(index, event) {
                event.stopPropagation();  // Prevent row click event
                feedbackData[index].starred = !feedbackData[index].starred;
                document.getElementById('feedback-items').innerHTML = '';
                feedbackData.forEach(renderFeedback);
            }

            // Loop through sample data
            feedbackData.forEach(renderFeedback);
        </script>        
    </div>
</body>
</html>
